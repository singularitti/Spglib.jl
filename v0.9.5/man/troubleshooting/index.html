<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Troubleshooting · Spglib.jl</title><meta name="title" content="Troubleshooting · Spglib.jl"/><meta property="og:title" content="Troubleshooting · Spglib.jl"/><meta property="twitter:title" content="Troubleshooting · Spglib.jl"/><meta name="description" content="Documentation for Spglib.jl."/><meta property="og:description" content="Documentation for Spglib.jl."/><meta property="twitter:description" content="Documentation for Spglib.jl."/><meta property="og:url" content="https://singularitti.github.io/Spglib.jl/man/troubleshooting/"/><meta property="twitter:url" content="https://singularitti.github.io/Spglib.jl/man/troubleshooting/"/><link rel="canonical" href="https://singularitti.github.io/Spglib.jl/man/troubleshooting/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Spglib.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../installation/">Installation Guide</a></li><li><a class="tocitem" href="../definitions/">Definitions and conventions</a></li><li><a class="tocitem" href="../dataset/">Spglib dataset</a></li><li><a class="tocitem" href="../magnetic_dataset/">Magnetic dataset (experimental)</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>Troubleshooting</a><ul class="internal"><li><a class="tocitem" href="#Cannot-find-the-Julia-executable"><span>Cannot find the Julia executable</span></a></li><li><a class="tocitem" href="#Julia-starts-slow"><span>Julia starts slow</span></a></li><li><a class="tocitem" href="#Unable-to-install-the-package"><span>Unable to install the package</span></a></li><li><a class="tocitem" href="#Returned-cell-symmetry-is-wrong"><span>Returned cell symmetry is wrong</span></a></li><li><a class="tocitem" href="#Julia&#39;s-results-are-different-from-Python&#39;s"><span>Julia&#39;s results are different from Python&#39;s</span></a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../lib/public/">Public API</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lib/internals/error/">Error</a></li><li><a class="tocitem" href="../../lib/internals/reciprocal/">Brillouin zone meshes</a></li></ul></li></ul></li><li><span class="tocitem">Developer Docs</span><ul><li><a class="tocitem" href="../../developers/contributing/">Contributing</a></li><li><a class="tocitem" href="../../developers/style-guide/">Style Guide</a></li><li><a class="tocitem" href="../../developers/design-principles/">Design Principles</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Troubleshooting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Troubleshooting</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/singularitti/Spglib.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/singularitti/Spglib.jl/blob/main/docs/src/man/troubleshooting.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Troubleshooting"><a class="docs-heading-anchor" href="#Troubleshooting">Troubleshooting</a><a id="Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting" title="Permalink"></a></h1><ul><li><a href="#Troubleshooting">Troubleshooting</a></li><li class="no-marker"><ul><li><a href="#Cannot-find-the-Julia-executable">Cannot find the Julia executable</a></li><li><a href="#Julia-starts-slow">Julia starts slow</a></li><li><a href="#Unable-to-install-the-package">Unable to install the package</a></li><li><a href="#Returned-cell-symmetry-is-wrong">Returned cell symmetry is wrong</a></li><li><a href="#Julia&#39;s-results-are-different-from-Python&#39;s">Julia&#39;s results are different from Python&#39;s</a></li></ul></li></ul><p>This page collects some possible errors you may encounter along with tips on how to fix them. If you have some questions about how to use this code, you are welcome to <a href="https://github.com/singularitti/Spglib.jl/discussions">discuss with us</a>.</p><p>If you have additional tips, please either <a href="https://github.com/singularitti/Spglib.jl/issues/new">report an issue</a> or <a href="https://github.com/singularitti/Spglib.jl/compare">submit a pull request</a> with suggestions.</p><h2 id="Cannot-find-the-Julia-executable"><a class="docs-heading-anchor" href="#Cannot-find-the-Julia-executable">Cannot find the Julia executable</a><a id="Cannot-find-the-Julia-executable-1"></a><a class="docs-heading-anchor-permalink" href="#Cannot-find-the-Julia-executable" title="Permalink"></a></h2><p>Make sure you have Julia installed in your environment. Please download the latest <a href="https://julialang.org/downloads/#current_stable_release">stable version</a> for your platform. If you are using a *nix system, the recommended way is to use <a href="https://github.com/JuliaLang/juliaup">Juliaup</a>. If you do not want to install Juliaup or you are using other platforms that Julia supports, download the corresponding binaries. Then, create a symbolic link to the Julia executable. If the path is not in your <a href="https://en.wikipedia.org/wiki/PATH_(variable)"><code>$PATH</code> environment variable</a>, export it to your <code>$PATH</code>.</p><p>Some clusters, like <a href="https://www.sdsc.edu/support/user_guides/comet.html">Comet</a>, or <a href="https://www.sdsc.edu/services/hpc/expanse/index.html">Expanse</a>, already have Julia installed as a module, you may just <code>module load julia</code> to use it. If not, either install by yourself or contact your administrator.</p><p>See <a href="../installation/#Installation-Guide">Installation Guide</a> for more information.</p><h2 id="Julia-starts-slow"><a class="docs-heading-anchor" href="#Julia-starts-slow">Julia starts slow</a><a id="Julia-starts-slow-1"></a><a class="docs-heading-anchor-permalink" href="#Julia-starts-slow" title="Permalink"></a></h2><p>First, we recommend you download the latest version of Julia. Usually, the newest version has the best performance.</p><p>If you need to use Julia for a simple, one-time task, you can start the Julia REPL with</p><pre><code class="language-bash hljs">julia --compile=min</code></pre><p>to minimize compilation or</p><pre><code class="language-bash hljs">julia --optimize=0</code></pre><p>to minimize optimizations, or just use both. Or you could make a system image and run with</p><pre><code class="language-bash hljs">julia --sysimage custom-image.so</code></pre><p>See <a href="https://youtu.be/IuwxE3m0_QQ?t=313">Fredrik Ekre&#39;s talk</a> for details.</p><h2 id="Unable-to-install-the-package"><a class="docs-heading-anchor" href="#Unable-to-install-the-package">Unable to install the package</a><a id="Unable-to-install-the-package-1"></a><a class="docs-heading-anchor-permalink" href="#Unable-to-install-the-package" title="Permalink"></a></h2><p>First, verify if your platform is supported by referring to the <a href="https://github.com/JuliaBinaryWrappers/spglib_jll.jl/blob/main/README.md#platforms"><code>spglib_jll.jl</code> platforms</a>. If it&#39;s not supported, kindly report the issue to the developers <a href="https://github.com/JuliaPackaging/Yggdrasil/issues/new">here</a>.</p><p>If you can install <code>spglib_jll.jl</code> but encounter issues with <code>Spglib.jl</code>, please report to the developer <a href="https://github.com/singularitti/Spglib.jl/issues/new">here</a>.</p><h2 id="Returned-cell-symmetry-is-wrong"><a class="docs-heading-anchor" href="#Returned-cell-symmetry-is-wrong">Returned cell symmetry is wrong</a><a id="Returned-cell-symmetry-is-wrong-1"></a><a class="docs-heading-anchor-permalink" href="#Returned-cell-symmetry-is-wrong" title="Permalink"></a></h2><p>Check whether you set the lattice correctly. This is the part where errors can easily occur, as we adopt a different convention from the Python and C versions.</p><p>For example, <a href="https://github.com/spglib/spglib/blob/v2.1.0-rc2/README.md">the example</a> shown in Spglib&#39;s official documentation is written as follows:</p><pre><code class="language-c hljs">#include &lt;assert.h&gt;
#include &quot;spglib.h&quot;

int main(void) {
    SpglibDataset *dataset;
    // Wurtzite structure (P6_3mc)
    double lattice[3][3] = {
        {3.111, -1.5555, 0}, {0, 2.6942050311733885, 0}, {0, 0, 4.988}};
    double position[4][3] = {
        {1.0 / 3, 2.0 / 3, 0.0},
        {2.0 / 3, 1.0 / 3, 0.5},
        {1.0 / 3, 2.0 / 3, 0.6181},
        {2.0 / 3, 1.0 / 3, 0.1181},
    };
    int types[4] = {1, 1, 2, 2};
    int num_atom = 4;
    double symprec = 1e-5;
    dataset = spg_get_dataset(lattice, position, types, num_atom, symprec);
    assert(dataset-&gt;spacegroup_number == 186);
    spg_free_dataset(dataset);
}</code></pre><p>Thus, <a href="https://github.com/spglib/spglib/blob/ddcc153/example/python_api/example.py">the Python correspondence</a> of the code should be:</p><pre><code class="language-python hljs">import spglib

lattice = [[3.111, 0, 0], [-1.5555, 2.6942050311733885, 0], [0, 0, 4.988]]
position = [
    [1.0 / 3, 2.0 / 3, 0.0],
    [2.0 / 3, 1.0 / 3, 0.5],
    [1.0 / 3, 2.0 / 3, 0.6181],
    [2.0 / 3, 1.0 / 3, 0.1181],
]
types = [1, 1, 2, 2]
symprec = 1e-5
cell = (lattice, positions, types)
dataset = spglib.get_symmetry_dataset(cell, symprec=symprec)
assert dataset[&#39;number&#39;] == 186</code></pre><p>Note that in Python, the <code>lattice</code> is transposed, as explained in its <a href="https://spglib.readthedocs.io/en/latest/variable.html#lattice">official documentation</a>.</p><p>However, the corresponding code in Julia should be written as follows:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Spglib</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; lattice = [[3.111, 0, 0], [-1.5555, 2.6942050311733885, 0], [0, 0, 4.988]];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; positions = [
           [1.0 / 3, 2.0 / 3, 0.0],
           [2.0 / 3, 1.0 / 3, 0.5],
           [1.0 / 3, 2.0 / 3, 0.6181],
           [2.0 / 3, 1.0 / 3, 0.1181],
       ];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; atoms = [1, 1, 2, 2];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; cell = Cell(lattice, positions, atoms)</code><code class="nohighlight hljs ansi" style="display:block;">SpglibCell{Float64, Float64, Int64, Float64}
 lattice:
   3.111  -1.5555  0.0
   0.0  2.6942050311733885  0.0
   0.0  0.0  4.988
 4 atomic positions:
   0.3333333333333333  0.6666666666666666  0.0
   0.6666666666666666  0.3333333333333333  0.5
   0.3333333333333333  0.6666666666666666  0.6181
   0.6666666666666666  0.3333333333333333  0.1181
 4 atoms:
   1  1  2  2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset = get_dataset(cell, 1e-5)</code><code class="nohighlight hljs ansi" style="display:block;">Dataset
  spacegroup_number: 186
  hall_number: 480
  international_symbol: P6_3mc
  hall_symbol: P 6c -2c
  choice:
  transformation_matrix: [1.0 -5.551115123125783e-17 0.0; 0.0 0.9999999999999999 0.0; 0.0 0.0 0.9999999999999999]
  origin_shift: [-5.551115123125783e-17, 0.0, 0.0]
  n_operations: 12
  rotations: StaticArraysCore.SMatrix{3, 3, Int32, 9}[[1 0 0; 0 1 0; 0 0 1], [1 -1 0; 1 0 0; 0 0 1], [0 -1 0; 1 -1 0; 0 0 1], [-1 0 0; 0 -1 0; 0 0 1], [-1 1 0; -1 0 0; 0 0 1], [0 1 0; -1 1 0; 0 0 1], [0 1 0; 1 0 0; 0 0 1], [1 0 0; 1 -1 0; 0 0 1], [1 -1 0; 0 -1 0; 0 0 1], [0 -1 0; -1 0 0; 0 0 1], [-1 0 0; -1 1 0; 0 0 1], [-1 1 0; 0 1 0; 0 0 1]]
  translations: StaticArraysCore.SVector{3, Float64}[[0.0, 0.0, 0.0], [3.0814879110195774e-33, -5.551115123125782e-17, 0.5], [5.551115123125783e-17, -5.551115123125782e-17, 0.0], [1.1102230246251565e-16, 0.0, 0.5], [1.1102230246251565e-16, 5.551115123125782e-17, 0.0], [5.551115123125783e-17, 5.551115123125782e-17, 0.5], [5.551115123125783e-17, -5.551115123125782e-17, 0.5], [3.0814879110195774e-33, -5.551115123125782e-17, 0.0], [0.0, 0.0, 0.5], [5.551115123125783e-17, 5.551115123125782e-17, 0.0], [1.1102230246251565e-16, 5.551115123125782e-17, 0.5], [1.1102230246251565e-16, 0.0, 0.0]]
  n_atoms: 4
  wyckoffs: [&#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;]
  site_symmetry_symbols: [&quot;3m.&quot;, &quot;3m.&quot;, &quot;3m.&quot;, &quot;3m.&quot;]
  equivalent_atoms: Int32[1, 1, 3, 3]
  crystallographic_orbits: Int32[1, 1, 3, 3]
  primitive_lattice: [3.111 -1.5555 0.0; 0.0 2.6942050311733885 0.0; 0.0 0.0 4.988]
  mapping_to_primitive: Int32[1, 2, 3, 4]
  n_std_atoms: 4
  std_lattice: [3.111 -1.5555 0.0; 0.0 2.6942050311733885 0.0; 0.0 0.0 4.988]
  std_types: Int32[1, 1, 2, 2]
  std_positions: StaticArraysCore.SVector{3, Float64}[[0.3333333333333333, 0.6666666666666666, 0.0], [0.6666666666666667, 0.3333333333333333, 0.5], [0.3333333333333333, 0.6666666666666666, 0.6181], [0.6666666666666667, 0.3333333333333333, 0.1181000000000001]]
  std_rotation_matrix: [1.0 0.0 0.0; 0.0 1.0 0.0; 0.0 0.0 1.0]
  std_mapping_to_primitive: Int32[1, 2, 3, 4]
  pointgroup_symbol: 6mm</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset.spacegroup_number</code><code class="nohighlight hljs ansi" style="display:block;">186</code></pre><p>Although the Julia definition of our <a href="../definitions/#Basis-vectors">Basis vectors</a> is not transposed (like the C-API), when written one by one, it still resembles a transposed version of the lattice in C. However, they both represent the following matrix:</p><p class="math-container">\[\begin{bmatrix}
    3.111 &amp; -1.5555 &amp; 0 \\
    0 &amp; 2.6942050311733885 &amp; 0 \\
    0 &amp; 0 &amp; 4.988
\end{bmatrix}\]</p><p>Of course, you can construct the lattice directly using its matrix form:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; lattice = [
           3.111  -1.5555  0.0
           0.0  2.6942050311733885  0.0
           0.0  0.0  4.988
       ];</code></pre><p>If you are not careful when writing these matrices, you may encounter unexpected results:</p><pre><code class="language-python hljs">import spglib

lattice = [
    [3.111, -1.5555, 0],
    [0, 2.6942050311733885, 0],
    [0, 0, 4.988]
]
positions = [
    [1.0 / 3, 2.0 / 3, 0.0],
    [2.0 / 3, 1.0 / 3, 0.5],
    [1.0 / 3, 2.0 / 3, 0.6181],
    [2.0 / 3, 1.0 / 3, 0.1181]
]
types = [1, 1, 2, 2]
num_atom = 4
symprec = 1e-5
cell = (lattice, positions, types)
dataset = spglib.get_symmetry_dataset(cell, symprec=symprec)

&gt;&gt;&gt; dataset[&#39;number&#39;]
4
&gt;&gt;&gt; dataset[&#39;international&#39;]
&#39;P2_1&#39;</code></pre><p>Or this:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; lattice = [[3.111, -1.5555, 0], [0, 2.6942050311733885, 0], [0, 0, 4.988]];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; cell = Cell(lattice, positions, atoms)</code><code class="nohighlight hljs ansi" style="display:block;">SpglibCell{Float64, Float64, Int64, Float64}
 lattice:
   3.111  0.0  0.0
   -1.5555  2.6942050311733885  0.0
   0.0  0.0  4.988
 4 atomic positions:
   0.3333333333333333  0.6666666666666666  0.0
   0.6666666666666666  0.3333333333333333  0.5
   0.3333333333333333  0.6666666666666666  0.6181
   0.6666666666666666  0.3333333333333333  0.1181
 4 atoms:
   1  1  2  2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset = get_dataset(cell, 1e-5)</code><code class="nohighlight hljs ansi" style="display:block;">Dataset
  spacegroup_number: 4
  hall_number: 6
  international_symbol: P2_1
  hall_symbol: P 2yb
  choice: b
  transformation_matrix: [-0.9999999999999999 0.9999999999999999 0.0; -0.0 0.0 -0.9999999999999999; -1.0 0.0 0.0]
  origin_shift: [0.0, 0.0, 0.0]
  n_operations: 2
  rotations: StaticArraysCore.SMatrix{3, 3, Int32, 9}[[1 0 0; 0 1 0; 0 0 1], [-1 0 0; 0 -1 0; 0 0 1]]
  translations: StaticArraysCore.SVector{3, Float64}[[-0.0, -0.0, -0.0], [-0.0, -0.0, 0.5]]
  n_atoms: 4
  wyckoffs: [&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;]
  site_symmetry_symbols: [&quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;]
  equivalent_atoms: Int32[1, 1, 3, 3]
  crystallographic_orbits: Int32[1, 1, 3, 3]
  primitive_lattice: [-0.0 -3.111 -0.0; -2.6942050311733885 -1.1387050311733884 -0.0; -0.0 -0.0 -4.988]
  mapping_to_primitive: Int32[1, 2, 3, 4]
  n_std_atoms: 4
  std_lattice: [2.6942050311733885 0.0 -1.1387050311733886; 0.0 4.988 0.0; 0.0 0.0 3.1110000000000007]
  std_types: Int32[1, 1, 2, 2]
  std_positions: StaticArraysCore.SVector{3, Float64}[[0.3333333333333336, 0.0, 0.6666666666666667], [0.6666666666666664, 0.5, 0.33333333333333326], [0.3333333333333336, 0.3818999999999999, 0.6666666666666667], [0.6666666666666664, 0.8818999999999999, 0.33333333333333326]]
  std_rotation_matrix: [0.0 1.0 0.0; 0.0 0.0 -1.0; -1.0 0.0 0.0]
  std_mapping_to_primitive: Int32[1, 2, 3, 4]
  pointgroup_symbol: 2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset.spacegroup_number</code><code class="nohighlight hljs ansi" style="display:block;">4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset.international_symbol</code><code class="nohighlight hljs ansi" style="display:block;">&quot;P2_1&quot;</code></pre><h2 id="Julia&#39;s-results-are-different-from-Python&#39;s"><a class="docs-heading-anchor" href="#Julia&#39;s-results-are-different-from-Python&#39;s">Julia&#39;s results are different from Python&#39;s</a><a id="Julia&#39;s-results-are-different-from-Python&#39;s-1"></a><a class="docs-heading-anchor-permalink" href="#Julia&#39;s-results-are-different-from-Python&#39;s" title="Permalink"></a></h2><p>For the same reason, the returned results from Python, especially lattices, are transposed versions of those in Julia.</p><pre><code class="language-python hljs">&gt;&gt;&gt; dataset[&#39;primitive_lattice&#39;]
array([[ 3.111     ,  0.        ,  0.        ],
       [-1.5555    ,  2.69420503,  0.        ],
       [ 0.        ,  0.        ,  4.988     ]])
&gt;&gt;&gt; dataset[&#39;std_lattice&#39;]
array([[ 3.111     ,  0.        ,  0.        ],
       [-1.5555    ,  2.69420503,  0.        ],
       [ 0.        ,  0.        ,  4.988     ]])
&gt;&gt;&gt; std_lattice_before_idealization = np.dot(
        np.transpose(lattice),
        np.linalg.inv(dataset[&#39;transformation_matrix&#39;])
    ).T
array([[ 3.111     ,  0.        ,  0.        ],
       [-1.5555    ,  2.69420503,  0.        ],
       [ 0.        ,  0.        ,  4.988     ]])</code></pre><p>These are equivalent to the following Julia matrices:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; [
           3.111   0.0      0.0
           -1.5555  2.69421  0.0
           0.0     0.0      4.988
       ];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; [
           3.111   0.0      0.0
           -1.5555  2.69421  0.0
           0.0     0.0      4.988
       ];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; [
           3.111   0.0      0.0
           -1.5555  2.69421  0.0
           0.0     0.0      4.988
       ];</code></pre><p>However, the actual Julia results should be:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Spglib</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; lattice = [[3.111, 0, 0], [-1.5555, 2.6942050311733885, 0], [0, 0, 4.988]];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; positions = [
           [1.0 / 3, 2.0 / 3, 0.0],
           [2.0 / 3, 1.0 / 3, 0.5],
           [1.0 / 3, 2.0 / 3, 0.6181],
           [2.0 / 3, 1.0 / 3, 0.1181],
       ];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; atoms = [1, 1, 2, 2];</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; cell = Cell(lattice, positions, atoms)</code><code class="nohighlight hljs ansi" style="display:block;">SpglibCell{Float64, Float64, Int64, Float64}
 lattice:
   3.111  -1.5555  0.0
   0.0  2.6942050311733885  0.0
   0.0  0.0  4.988
 4 atomic positions:
   0.3333333333333333  0.6666666666666666  0.0
   0.6666666666666666  0.3333333333333333  0.5
   0.3333333333333333  0.6666666666666666  0.6181
   0.6666666666666666  0.3333333333333333  0.1181
 4 atoms:
   1  1  2  2</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset = get_dataset(cell, 1e-5)</code><code class="nohighlight hljs ansi" style="display:block;">Dataset
  spacegroup_number: 186
  hall_number: 480
  international_symbol: P6_3mc
  hall_symbol: P 6c -2c
  choice:
  transformation_matrix: [1.0 -5.551115123125783e-17 0.0; 0.0 0.9999999999999999 0.0; 0.0 0.0 0.9999999999999999]
  origin_shift: [-5.551115123125783e-17, 0.0, 0.0]
  n_operations: 12
  rotations: StaticArraysCore.SMatrix{3, 3, Int32, 9}[[1 0 0; 0 1 0; 0 0 1], [1 -1 0; 1 0 0; 0 0 1], [0 -1 0; 1 -1 0; 0 0 1], [-1 0 0; 0 -1 0; 0 0 1], [-1 1 0; -1 0 0; 0 0 1], [0 1 0; -1 1 0; 0 0 1], [0 1 0; 1 0 0; 0 0 1], [1 0 0; 1 -1 0; 0 0 1], [1 -1 0; 0 -1 0; 0 0 1], [0 -1 0; -1 0 0; 0 0 1], [-1 0 0; -1 1 0; 0 0 1], [-1 1 0; 0 1 0; 0 0 1]]
  translations: StaticArraysCore.SVector{3, Float64}[[0.0, 0.0, 0.0], [3.0814879110195774e-33, -5.551115123125782e-17, 0.5], [5.551115123125783e-17, -5.551115123125782e-17, 0.0], [1.1102230246251565e-16, 0.0, 0.5], [1.1102230246251565e-16, 5.551115123125782e-17, 0.0], [5.551115123125783e-17, 5.551115123125782e-17, 0.5], [5.551115123125783e-17, -5.551115123125782e-17, 0.5], [3.0814879110195774e-33, -5.551115123125782e-17, 0.0], [0.0, 0.0, 0.5], [5.551115123125783e-17, 5.551115123125782e-17, 0.0], [1.1102230246251565e-16, 5.551115123125782e-17, 0.5], [1.1102230246251565e-16, 0.0, 0.0]]
  n_atoms: 4
  wyckoffs: [&#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;]
  site_symmetry_symbols: [&quot;3m.&quot;, &quot;3m.&quot;, &quot;3m.&quot;, &quot;3m.&quot;]
  equivalent_atoms: Int32[1, 1, 3, 3]
  crystallographic_orbits: Int32[1, 1, 3, 3]
  primitive_lattice: [3.111 -1.5555 0.0; 0.0 2.6942050311733885 0.0; 0.0 0.0 4.988]
  mapping_to_primitive: Int32[1, 2, 3, 4]
  n_std_atoms: 4
  std_lattice: [3.111 -1.5555 0.0; 0.0 2.6942050311733885 0.0; 0.0 0.0 4.988]
  std_types: Int32[1, 1, 2, 2]
  std_positions: StaticArraysCore.SVector{3, Float64}[[0.3333333333333333, 0.6666666666666666, 0.0], [0.6666666666666667, 0.3333333333333333, 0.5], [0.3333333333333333, 0.6666666666666666, 0.6181], [0.6666666666666667, 0.3333333333333333, 0.1181000000000001]]
  std_rotation_matrix: [1.0 0.0 0.0; 0.0 1.0 0.0; 0.0 0.0 1.0]
  std_mapping_to_primitive: Int32[1, 2, 3, 4]
  pointgroup_symbol: 6mm</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset.primitive_lattice</code><code class="nohighlight hljs ansi" style="display:block;">3×3 Lattice{Float64}
 3.111  -1.5555  0.0
 0.0  2.6942050311733885  0.0
 0.0  0.0  4.988</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; dataset.std_lattice</code><code class="nohighlight hljs ansi" style="display:block;">3×3 Lattice{Float64}
 3.111  -1.5555  0.0
 0.0  2.6942050311733885  0.0
 0.0  0.0  4.988</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; std_lattice_before_idealization =
           convert(Matrix{Float64}, Lattice(cell)) * inv(dataset.transformation_matrix)</code><code class="nohighlight hljs ansi" style="display:block;">3×3 Matrix{Float64}:
 3.111  -1.5555   0.0
 0.0     2.69421  0.0
 0.0     0.0      4.988</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../../lib/public/">Public API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 17 September 2025 20:31">Wednesday 17 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
